webpackJsonp([44],{1391:function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={cssText:':local{\n    .blockItem{\n        color:#fff;\n        border-radius: 10px;\n        position: relative;\n        font-size: 16px;\n        transition: all .3s;\n        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n    }\n    .blockItem::before{\n        content: \' \';\n        position: absolute;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        opacity: 0;\n        cursor: pointer;\n        border-radius: 10px;\n        background-color: rgba(0,0,0,0.5);\n        transition: all .3s;\n        z-index: 1\n    }\n    .blockItem:hover::before{\n        opacity: 1\n    }\n    .pickItem{\n        color:#fff;\n        border-radius: 10px;\n        position: relative;\n        font-size: 16px;\n        transition: all .3s;\n        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n    }\n    .putPositionItem{\n        color:#fff;\n        border-radius: 10px;\n        position: relative;\n        font-size: 16px;\n        transform-origin: 50% 50%;\n        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n    }\n    .transition{\n        transition: all .36s ease-in-out;\n    }\n    .layer{\n        position: fixed;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        opacity: 0;\n        background-color: rgba(0,0,0,0.8);\n        transition: all .3s ease-in-out;\n        z-index: 1000;\n    }\n}\n  ',javaScriptText:"\nimport React from \"react\"\nimport style from './index.scss'\n\nconst first = { left: 0, top: 0 };\nconst last = { left: 0, top: 0 };\n\nclass Flip extends React.Component {\n  constructor(props) {\n    super(props);\n    this.previewItem = this.previewItem.bind(this)\n    this.hideLayer = this.hideLayer.bind(this)\n    this.transEnd = this.transEnd.bind(this)\n    this.previewBlock = React.createRef()\n    this.state = {\n      pickItem: {\n        width: 300,\n        height: 300,\n        color: 'd3d3d3'\n      },\n      preview: false,\n      animation: 0,   // 0 : \u5173\u95ed  0.5 \uff1a\u9884\u89c8\u5f00\u542f\u52a8\u753b 1 \uff1a\u5f00\u542f -0.5 : \u9884\u89c8\u5173\u95ed\u52a8\u753b  \n      blockList: new Array(5).fill(null).map(item => {\n        return {\n          width: this.getWidth(),\n          height: this.getHeight(),\n          color: this.getColor()\n        }\n      })\n    }\n  }\n  componentDidUpdate() {\n    // \u5982\u679cpreview\u5df2\u7ecf\u5207\u6362\u5230true\n    // \u83b7\u53d6dom\u4e2d\u7684last\u4f4d\u7f6e\n    if (this.state.preview && this.state.animation === 0) {\n      const lastRect = this.previewBlock.current.getBoundingClientRect()\n      last.left = lastRect.left\n      last.top = lastRect.top\n      // \u4e0b\u4e00\u5e27\u5207\u6362\u5230\u9884\u89c8\u5f00\u542f\u52a8\u753b\n      setTimeout(() => {\n        this.setState({ animation: 0.5 })\n      }, 0)\n    } else if (!this.state.preview && this.state.animation !== 0) {\n      // \u5982\u679cpreview\u5df2\u7ecf\u5207\u6362\u5230false\n      // dom\u5df2\u7ecf\u6d88\u5931\n      // \u5c06\u52a8\u753b\u72b6\u6001\u5207\u6362\u56de\u5df2\u5173\u95ed\n      setTimeout(() => {\n        this.setState({ animation: 0 })\n      }, 0)\n    }\n  }\n  transEnd() {\n    if (this.state.animation === 0.5) {\n      this.setState({ animation: 1 })\n    } else if (this.state.animation === -0.5) {\n      this.setState({ animation: 0, preview: false })\n    }\n  }\n  getWidth() {\n    return Math.round(Math.random() * 120 + 80)\n  }\n  getHeight() {\n    return Math.round(Math.random() * 240 + 120)\n  }\n  getColor() {\n    return ('00000' + (Math.random() * 0x1000001).toString(16)).substr(-6)\n  }\n  previewItem(index, e) {\n    if (!this.state.preview) {\n      const firstRect = e.target.getBoundingClientRect()\n      this.setState({\n        preview: true,\n        pickItem: this.state.blockList[index],\n      })\n      first.left = firstRect.left\n      first.top = firstRect.top\n      // console.log('first',first)\n    }\n  }\n  hideLayer() {\n    if (this.state.preview) {\n      this.setState({ animation: -0.5 });\n    }\n  }\n\n  render() {\n    const { animation, preview, blockList, pickItem } = this.state\n    console.log(animation)\n    return (\n      <div style={{ overflow: 'visible' }}>\n        <ul data-flex=\"main:center cross:bottom\">\n          {blockList.map((item, index) => {\n            return (<li key={index} data-flex='main:center cross:center' className={style.blockItem} onClick={this.previewItem.bind(this, index)}\n              style={{ background: `#${item.color}`, width: item.width, height: item.height, }}>{item.width} X {item.height}</li>)\n          })}\n        </ul>\n        {preview ?\n          <div className={`/${style.layer} /${(animation === 0.5 || animation === -0.5) ? style.transition : null}`} data-flex='main:center cross:center' onClick={this.hideLayer}\n          onTransitionEnd={this.transEnd} style={{ opacity: (animation === 0.5 || animation === 1) ? 1 : 0 }}>\n              {/* transition \u8fd9\u4e0d\u80fd\u9009\u62e90.5\uff0c\u56e0\u4e3a0.5\u662f\u4ecelast(0)\u53d8\u5230first(0.5)\u7684\u8fc7\u7a0b,\u800c\u5e94\u8be5\u9009\u62e91(dom\u5df2\u7ecf\u5904\u4e8efirst\u7684\u4f4d\u7f6e)\u5f00\u59cb\u52a8\u753b*/}\n            <div className={`${style.putPositionItem} ${(animation === 1 || animation === -0.5) ? style.transition : null}`} data-flex='main:center cross:center' ref={this.previewBlock}\n              onTransitionEnd={this.transEnd}\n                //    \u96be\u70b9\u5728\u8fd9\u91cc\n                //    animation === 0 \u7684\u65f6\u5019\u8981translate3d(0,0,0) scale(1) \u6765\u83b7\u53d6last\u7684\u4f4d\u7f6e\u4fe1\u606f\n                //    animation === 0.5 \u7684\u65f6\u5019\u8fd9\u65f6\u5019flip\u52a8\u753b\u8fd8\u6ca1\u6709\u89e6\u53d1\uff0c\u5c06\u521d\u59cb\u4f4d\u7f6e\u79fb\u52a8\u5230firts\u7684\u4f4d\u7f6e\n                //    animation === 1 \u7684\u5f00\u59cbflip\u52a8\u753b\uff0c\u4f46\u662fanimation == 1 \u662f\u7531layer\u7684animation === 0.5\u7684transEnd\u89e6\u53d1\u7684\uff0c\u6240\u4ee5\u8981\u7b49layer\u51fa\u73b0\u540e\u53ef\u4ee5\n              style={{\n                background: `#${pickItem.color}`, width: pickItem.width, height: pickItem.height,\n                transform: (animation === 0.5 || animation === -0.5) ? `translate3d(${first.left - last.left}px, ${first.top - last.top}px, 0) scale(1)`\n                  : (animation === 0 ? 'translate3d(0,0,0) scale(1)' : 'translate3d(0,0,0) scale(2)')\n              }}>\n              {pickItem.width} X {pickItem.height}</div>\n          </div>\n          : null\n        }\n\n      </div>\n    )\n  }\n}\n\nexport default Flip;\n\n\n"}}});
//# sourceMappingURL=44.5080cd35.chunk.js.map