webpackJsonp([14],{1122:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={javaScriptText:[{title:"LabeledSlider(\u5b50\u7ec4\u4ef6)",text:'import xs from "xstream";\nimport { run } from "@cycle/run";\nimport { div, input, h2, makeDOMDriver } from "@cycle/dom";\n\n//intent (events => actions)\nfunction intent(domSource) {\n  return {\n    changeValue$: domSource\n      .select(".slider")\n      .events("input")\n      .map(ev => ev.target.value)\n  };\n}\n\n//model (actions => state)\nfunction model(actions, props$) {\n  const state$ = props$\n    .map(\n      props =>\n        //\u8fd9\u90e8\u5206\u624d\u662f\u771f\u6b63\u542b\u6709\u53d8\u52a8\u6570\u636e\u7684\u6d41\n        actions.changeValue$\n          .map(value => ({\n            label: props.label,\n            unit: props.unit,\n            min: props.min,\n            value: value,\n            max: props.max\n          }))\n          .startWith(props) //\u53d1\u51fa\u6d41\n    )\n    .flatten() //\u6e90\u6d41(props$)\u5e76\u975e\u8981\u8f93\u51fa\u7684\u6d41(\u542bchangeValue$\u7684\u4e00\u4e2a\u5b8c\u6574\u7684state$)\uff0c\u8981\u8f93\u51fa\u7684\u6d41\u662f\u7531\u6e90\u6d41\u5185\u90e8\u4ee5\u53e6\u4e00\u4e2a\u6d41\u53d1\u51fa\u7684(changeValue$),\u7531flatten()\u6574\u5408\n    .remember(); //\u91cd\u65b0\u5c06\u6d41\u4f5c\u4e3a\u4e00\u4e2a\u8f93\u51fa\u6d41\u8fdb\u884c\u8f93\u51fa\uff0c\u76f8\u5f53\u4e8e\u89e6\u53d1\u4e86.startWith()\u3002\u672c\u8eab\u7684\u6d41\u5e76\u975e\u4e00\u4e2a\u8f93\u51fa\u6d41\uff08\u4e0d\u542b\u6709ofcreatcombine\u4e4b\u7c7b\u7684\u521b\u5efa\uff09\n\n  return state$;\n}\n\n//view (state => dom)\nfunction view(state$) {\n  return state$.map(state =>\n    div([\n      `${state.label}: ${state.value} ${state.unit}`,\n      input(".slider", {\n        attrs: {\n          type: "range",\n          min: state.min,\n          max: state.max,\n          value: state.value\n        }\n      })\n    ])\n  );\n}\n\n//\u7ec4\u88c5\nfunction LabeledSlider(sources) {\n  //\u95ed\u73af\n  const actions = intent(sources.DOM);\n  const state$ = model(actions, sources.props);\n  const vdom$ = view(state$);\n\n  //\u8f93\u51fa\u526f\u4f5c\u7528\n  const sinks = {\n    DOM: vdom$,\n    value: state$.map(state => state.value)\n  };\n\n  return sinks;\n}\n\nexport default LabeledSlider;\n  '},{title:"index.js(\u7236\u7ec4\u4ef6)",text:'import xs from "xstream";\n// import Rx from "rxjs";\nimport { run } from "@cycle/run";\nimport { div, h2, makeDOMDriver } from "@cycle/dom";\nimport isolate from "@cycle/isolate";\n\nimport LabeledSlider from "./LabeledSlider";\n\nfunction main(sources) {\n  //\u5b9e\u4f8b\u5316\u7ec4\u4ef6\n  const weightSlider = isolate(LabeledSlider)({\n    DOM: sources.DOM,\n    props: xs.of({\n      label: "Weight",\n      unit: "kg",\n      min: 40,\n      value: 70,\n      max: 150\n    })\n  });\n  const heightSlider = isolate(LabeledSlider)({\n    DOM: sources.DOM,\n    props: xs.of({\n      label: "Height",\n      unit: "cm",\n      min: 140,\n      value: 170,\n      max: 210\n    })\n  });\n\n  //\u83b7\u53d6\u7ec4\u4ef6\u7684\u6d41\u4e0edom\n  const { value: weightValue$, DOM: weightVDom$ } = weightSlider;\n  const { value: heightValue$, DOM: heightVDom$ } = heightSlider;\n\n  //\u8ba1\u7b97bmi\n  const bmi$ = xs\n    .combine(weightValue$, heightValue$)\n    .map(([weight, height]) => {\n      const heightMeters = height * 0.01;\n      const bmi = Math.round(weight / (heightMeters * heightMeters));\n      return bmi;\n    })\n    .remember();\n\n  //\u8ba1\u7b97\u7236\u7ec4\u4ef6vdom\n  const vdom$ = xs\n    .combine(bmi$, weightVDom$, heightVDom$)\n    .map(([bmi, weightVDom, heightVDom]) =>\n      div([\n        weightVDom,\n        heightVDom,\n        h2({ style: { marginTop: "20px" } }, `BMI is   ${bmi}`)\n      ])\n    );\n\n  return {\n    DOM: vdom$\n  };\n}\n\nrun(main, {\n  DOM: makeDOMDriver("#app")\n});\n    '}]}}});
//# sourceMappingURL=14.9958ea42.chunk.js.map