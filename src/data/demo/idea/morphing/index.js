// CSS表单美化
import React from "react";
import style from "./index.scss";
import anime from "animejs";

class Morphing extends React.Component {
  componentDidMount() {
    const timeline = anime.timeline({
      autoplay: true,
      direction: "normal",
      loop: true
    });

    timeline
    //svg倒转
      .add({
        targets: "#svg",
        transform: {
          value: ["rotate(180)", "rotate(0)"],
          duration: 500,
          easing: "easeInOutQuad"
        },
        offset: '-=100'
      })
    //path转为圆背景
      .add({
        targets: "#path1",
        d: {
          value:
            "m 50.37537,0 c 24.48828,0 49.62463,20.277233 49.62463,50 l 0,0 c 0,23.39517 -18.94573,50 -50,50 -31.05427,0 -50,-25.001 -50,-50 l 0,0 c 0,-25.05122 20.07871,-50 50.37537,-50 z ",
          duration: 400,
          easing: "easeInOutQuad"
        },
        fill: {
          value: "#DE744C",
          duration: 400,
          easing: "easeInOutQuad"
        },
        offset: '-=100'
      })
    //path转为转动线条
      .add({
        targets: "#path2",
        d: {
          value: [
            "m 25.731,41.735 c 1.59412,2.26533 4.60067,2.75688 6.666,0.911 0,0 16.623493,-15.289 17.97837,-15.289 1.354877,0 17.97163,15.279 17.97163,15.279 2.06561,1.84559 5.07106,1.36492 6.67,-0.897 1.59895,-2.26192 0.6802,-4.85572 -1.49663,-6.56869 0,0 -21.70825,-18.213 -23.145,-18.213 -1.43675,0 -23.133,18.111 -23.133,18.111 -2.18108,1.70758 -3.10548,4.40137 -1.51137,6.66669 z",
            "m 26.079342,19.022245 c 1.674171,2.206828 4.110842,1.439263 6.798376,0.768441 0,0 8.798068,-4.847765 17.640988,-4.789875 8.84292,0.0579 17.696452,4.768123 17.696452,4.768123 2.687038,0.672849 5.139406,1.385956 6.79096,-0.837839 1.651563,-2.223794 1.413919,-5.905362 -1.239632,-6.700029 0,0 -11.73023,-7.148615 -23.24778,-7.230255 -11.51755,-0.0816 -23.270916,7.208503 -23.270916,7.208503 -2.655026,0.789794 -2.842608,4.606112 -1.168448,6.812931 z"
          ],
          duration: 500,
          easing: "easeInOutQuad"
        },
        fill: {
          value: "#ffffff",
          duration: 500,
          easing: "easeInOutQuad"
        },
        offset: '+=100'
      })
      //svg自身选择1080°
      .add({
        targets: "#svg",
        transform: {
          value: ["rotate(0)", "rotate(1080)"],
          duration: 2000,
          easing: "easeInOutQuad"
        },
        offset: '+=100'
      })
      //path2变成打钩图标
      .add({
        targets: "#path2",
        d: {
          value: [
            "m 26.079342,19.022245 c 1.674171,2.206828 4.110842,1.439263 6.798376,0.768441 0,0 8.798068,-4.847765 17.640988,-4.789875 8.84292,0.0579 17.696452,4.768123 17.696452,4.768123 2.687038,0.672849 5.139406,1.385956 6.79096,-0.837839 1.651563,-2.223794 1.413919,-5.905362 -1.239632,-6.700029 0,0 -11.73023,-7.148615 -23.24778,-7.230255 -11.51755,-0.0816 -23.270916,7.208503 -23.270916,7.208503 -2.655026,0.789794 -2.842608,4.606112 -1.168448,6.812931 z",
            "m 21.522531,46.814287 c -2.155663,1.739544 -2.017039,4.585829 -0.255669,6.723691 0,0 20.526021,19.871468 21.676674,20.421006 1.150652,0.549537 36.099893,-34.871342 36.099893,-34.871342 1.713503,-2.176424 1.866279,-5.13091 -0.247851,-6.920703 -2.11413,-1.789791 -5.012692,-1.397803 -6.686235,0.809492 0,0 -28.798856,28.632137 -29.498398,28.297812 -0.699543,-0.334321 -14.352672,-13.40414 -14.352672,-13.40414 -1.656876,-2.219833 -4.580081,-2.795358 -6.735742,-1.055816 z"
          ],
          duration: 500,
          easing: "easeInOutQuad"
        },
        fill: {
          value: ["#ffffff", "#ffffff"],
          duration: 500,
          easing: "easeInOutQuad"
        },
        offset: '+=100'
      })
      //整个svg缩小
      .add({
        targets: "#svg",
        transform: {
          value: ["scale(1)", "scale(0)"],
          duration: 800,
          easing: "easeInOutQuad"
        },
        offset: '+=100'
      })
      //变回初始的箭头
      .add({
        targets: "#path2",
        d: {
          value: [
            "m 25.731,41.735 c 1.59412,2.26533 4.60067,2.75688 6.666,0.911 0,0 16.623493,-15.289 17.97837,-15.289 1.354877,0 17.97163,15.279 17.97163,15.279 2.06561,1.84559 5.07106,1.36492 6.67,-0.897 1.59895,-2.26192 0.6802,-4.85572 -1.49663,-6.56869 0,0 -21.70825,-18.213 -23.145,-18.213 -1.43675,0 -23.133,18.111 -23.133,18.111 -2.18108,1.70758 -3.10548,4.40137 -1.51137,6.66669 z",
            "m 26.079342,19.022245 c 1.674171,2.206828 4.110842,1.439263 6.798376,0.768441 0,0 8.798068,-4.847765 17.640988,-4.789875 8.84292,0.0579 17.696452,4.768123 17.696452,4.768123 2.687038,0.672849 5.139406,1.385956 6.79096,-0.837839 1.651563,-2.223794 1.413919,-5.905362 -1.239632,-6.700029 0,0 -11.73023,-7.148615 -23.24778,-7.230255 -11.51755,-0.0816 -23.270916,7.208503 -23.270916,7.208503 -2.655026,0.789794 -2.842608,4.606112 -1.168448,6.812931 z"
          ],
          duration: 700,
          easing: "easeInOutQuad"
        },
        fill: {
          value: "#ffffff",
          duration: 700,
          easing: "easeInOutQuad"
        },
        offset: '+=100'
      })
  }
  render() {
    return (
      <div className={style.container}>
        <svg
          className={style.svgContainer}
          width="60"
          height="60"
          viewBox="0 0 100 100"
          id="svg"
          transform="rotate(180)"
        >
          <g id="group">
            <path
              className={style.path1}
              d="m 50.37537,16.95731 c 2.77,0 5,2.23 5,5 l 0,48.5863 c 0,2.77 -2.23,5 -5,5 -2.77,0 -5,-2.23 -5,-5 l 0,-48.5863 c 0,-2.77 2.23,-5 5,-5 z"
              id="path1"
            />
            <path
              className={style.path2}
              d="m 25.731,41.735 c 1.59412,2.26533 4.60067,2.75688 6.666,0.911 0,0 16.623493,-15.289 17.97837,-15.289 1.354877,0 17.97163,15.279 17.97163,15.279 2.06561,1.84559 5.07106,1.36492 6.67,-0.897 1.59895,-2.26192 0.6802,-4.85572 -1.49663,-6.56869 0,0 -21.70825,-18.213 -23.145,-18.213 -1.43675,0 -23.133,18.111 -23.133,18.111 -2.18108,1.70758 -3.10548,4.40137 -1.51137,6.66669 z"
              id="path2"
            />
          </g>
        </svg>
      </div>
    );
  }
}

export default Morphing;
