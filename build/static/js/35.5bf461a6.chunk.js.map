{"version":3,"sources":["project/jquery-4/text/index.ts"],"names":["Object","defineProperty","__webpack_exports__","value","exampleText","javaScriptText","title","text"],"mappings":"qDAAAA,OAAAC,eAAAC,EAAA,cAAAC,OAAA,IAwHeD,EAAA,SAAEE,YAxHG,gvBAwHUC,iBAlG1BC,MAAO,wBACPC,KAAM","file":"static/js/35.5bf461a6.chunk.js","sourcesContent":["const exampleText = `\r\nvar cb = $.callbacks(\"once unique stopOnFalse memory\");\r\n// once : 队列只会fire一次\r\n// unique : 提出重复的回调\r\n// stopOnFalse : 有其中一个回调返回false就中断后面的回调执行\r\n// memory : fire后,下一次add会记忆上一次的结束位置,直接执行add的回调\r\n\r\ncb.add(function (value) {\r\n    console.log(value)\r\n})\r\nfunction test(value) {\r\n    console.log(value)\r\n}\r\ncb.add(test, test)\r\ncb.fire('hello');        \r\ncb.add(function (value) {   //这里的value会是上次fire的data hello\r\n    console.log(value)\r\n})\r\n\r\n`\r\n\r\nconst javaScriptText = [ {\r\n    title: 'Callbacks源码',\r\n    text: `\r\n(function (root) {\r\n    var jQuery = function (selector, context) {\r\n        // 错误实例化：会造成无限自我调用，形成死循环\r\n        // return  new jQuery();  \r\n        return new jQuery.prototype.init(selector, context)\r\n    }\r\n\r\n    // 为jQuery.prototype起别名jQuery.fn\r\n    jQuery.fn = jQuery.prototype = {\r\n        init: function (selector, context) {\r\n           ...\r\n        },\r\n\r\n    }\r\n\r\n    jQuery.fn.extend = jQuery.extend = function () { ... }\r\n\r\n    // 解析 \"once memory\" => { once:true,memory:true }\r\n\tfunction createOptions(options) {\r\n\t\tvar object = optionsCache[options] = {};\r\n\t\toptions.split(/\\s+/).forEach(function (value) {\r\n\t\t\tobject[value] = true;\r\n\t\t});\r\n\t\treturn object;\r\n    }\r\n    \r\n    jQuery.extend({\r\n        ...\r\n        callbacks: function (options) {\r\n\t\t\t// 解析options并缓存到optionsCache\r\n\t\t\toptions = typeof options === \"string\" ? (optionsCache[options] || createOptions(options)) : {};\r\n\t\t\tvar list = [];\r\n\t\t\tvar index, length, haveFired, memoryData, memoryStartIndex, fireStartIndex;\r\n\t\t\tvar fire = function (data) {\r\n\t\t\t\tmemoryData = options.memory && data;\t\t\t\t\t// 如果有开启memory配置，在fire后缓存data到memory变量\r\n\t\t\t\tindex = fireStartIndex || 0;\t\t\t\t\t\t\t\t\t// 当fire时，队列从第几个开始执行，默认为0，当开启memory属性后add从add的这一项开始\r\n\t\t\t\tmemoryStartIndex = 0;\r\n\t\t\t\thaveFired = true;\r\n\t\t\t\tlength = list.length;\r\n\t\t\t\tfor (; index < length; index++) {\r\n\t\t\t\t\t// 如果开启了stopOnFalse且返回了false，则break出循环\r\n\t\t\t\t\tif (list[index].apply(data[0], data[1]) === false && options.stopOnfalse) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar self = {\r\n\t\t\t\tadd: function () {\r\n\t\t\t\t\t// 类数组转数组\r\n\t\t\t\t\tvar args = Array.prototype.slice.call(arguments);\r\n\t\t\t\t\tmemoryStartIndex = list.length;\r\n\t\t\t\t\targs.forEach(function (fn) {\r\n\t\t\t\t\t\tif (toString.call(fn) === \"[object Function]\") {\r\n\t\t\t\t\t\t\t// 未开unique 或开启了 unique且list中不包含fn\r\n\t\t\t\t\t\t\tif (!options.unique || !self.has(fn, list)) {\r\n\t\t\t\t\t\t\t\tlist.push(fn);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// fire后memoryData才有值，所以fire前即使执行add方法，也不会直接fire到add的方法\r\n\t\t\t\t\tif (memoryData) {\r\n\t\t\t\t\t\t// 如果开启了memory属性，则设置本次增加的方法的index为add触发的fire的fireStartIndex的值\r\n\t\t\t\t\t\tfireStartIndex = memoryStartIndex;\r\n\t\t\t\t\t\tfire(memoryData);\r\n                    }\r\n                    return this;   // 返回this，供链式调用\r\n\t\t\t\t},\r\n\t\t\t\tfireWith: function (context, arguments) {\r\n\t\t\t\t\tvar args = [context, arguments];\r\n\t\t\t\t\t// 没有开启once配置 或 开启了once但是未fire过\r\n\t\t\t\t\tif (!options.once || !haveFired) {\r\n\t\t\t\t\t\tfire(args);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tfire: function () {\r\n\t\t\t\t\tself.fireWith(this, arguments);\t    // this指向self\r\n\t\t\t\t},\r\n\t\t\t\thas: function (fn, list) {\r\n\t\t\t\t\tvar result = list === null ? -1 : [].indexOf.call(list, fn)\r\n\t\t\t\t\treturn result > -1\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t\treturn self;\r\n\t\t},\r\n    })\r\n    ...\r\n\r\n    jQuery.fn.init.prototype = jQuery.fn \r\n\r\n    root.$ = root.jQuery = jQuery\r\n\r\n})(this);\r\n    `\r\n}];\r\n\r\nexport default { exampleText, javaScriptText };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/project/jquery-4/text/index.ts"],"sourceRoot":""}