{"version":3,"sources":["project/flip/demo/index.jsx","webpack:///./src/project/flip/demo/index.scss?78a3","project/flip/demo/index.scss"],"names":["previewVisibleStatus","currentPreviewEle","previewFirstRect","previewLastRect","rectInfo","scaleValue","listData","Array","fill","map","width","getSize","height","bgPic","Math","random","toString","substr","round","Demo","previewRef","React","createRef","state","previewStatus","previewImgInfo","Component","this","updatePreviewStatus","_this2","lastRectInfo","current","getBoundingClientRect","left","top","setState","setTimeout","status","arguments","length","undefined","e","target","_this3","_state","__WEBPACK_IMPORTED_MODULE_0_react___default","a","createElement","className","item","index","key","onClick","previewItem","bind","title","src","alt","style","opacity","ref","transform","transformOrigin","onTransitionEnd","transEnd","content","__webpack_require__","module","i","options","hmr","locals","exports","push"],"mappings":"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","file":"static/js/20.5b405144.chunk.js","sourcesContent":["\r\nimport React from \"react\";\r\nimport './index.scss'\r\n\r\n// 标识预览的状态，1：显示，2：开始关闭，3：已关闭\r\nlet previewVisibleStatus = 3\r\n// 当前预览的元素\r\nlet currentPreviewEle = null\r\n// 记录动画起始状态的元素位置信息，left, top\r\nconst previewFirstRect = [0, 0]\r\nconst previewLastRect = [0, 0]\r\n// 临时记录位置信息\r\nlet rectInfo = null\r\n// First与Last两个状态之间的缩放比例\r\nlet scaleValue = 1\r\n// 生成初始测试数据\r\nlet listData = Array(5).fill().map(() => {\r\n  const width = getSize()\r\n  const height = getSize()\r\n  return {\r\n    width,\r\n    height,\r\n    bgPic: `https://dummyimage.com/${width}x${height}/${color16()}`\r\n  }\r\n})\r\n\r\n// 获取在 200-900之间的随机整数\r\nfunction getSize() {\r\n  return Math.round(Math.random() * 700 + 200)\r\n}\r\n// 生成随机 16进制颜色\r\nfunction color16() {\r\n  return ('00000' + (Math.random() * 0x1000000).toString(16)).substr(-6)\r\n}\r\n\r\nclass Demo extends React.Component {\r\n  previewRef = React.createRef()\r\n  state = {\r\n    previewStatus: 0,\r\n    previewImgInfo: null\r\n  }\r\n  componentDidUpdate() {\r\n    // card 预览\r\n    this.updatePreviewStatus()\r\n  }\r\n  updatePreviewStatus() {\r\n    if (this.state.previewStatus === 1) {\r\n      // Last + Invert\r\n      if (previewVisibleStatus === 1) {\r\n        const lastRectInfo = this.previewRef.current.getBoundingClientRect()\r\n        previewLastRect[0] = lastRectInfo.left\r\n        previewLastRect[1] = lastRectInfo.top\r\n        scaleValue = rectInfo.width / lastRectInfo.width\r\n      }\r\n      this.setState({\r\n        previewStatus: 2\r\n      })\r\n    } else if (this.state.previewStatus === 2) {\r\n      // Play\r\n      setTimeout(() => {\r\n        this.setState({\r\n          previewStatus: 3\r\n        })\r\n      }, 0)\r\n    }\r\n  }\r\n  previewItem(status, previewImgInfo = null, e) {\r\n    previewVisibleStatus = status\r\n    if (previewVisibleStatus === 1) {\r\n      currentPreviewEle = e.target\r\n      // First\r\n      rectInfo = currentPreviewEle.getBoundingClientRect()\r\n      previewFirstRect[0] = rectInfo.left\r\n      previewFirstRect[1] = rectInfo.top\r\n      this.setState({\r\n        previewImgInfo,\r\n        previewStatus: 1\r\n      })\r\n    } else {\r\n      this.setState({\r\n        previewStatus: 1\r\n      })\r\n    }\r\n  }\r\n  transEnd(e) {\r\n    if (previewVisibleStatus === 2 && previewVisibleStatus !== 3) {\r\n      previewVisibleStatus = 3\r\n      this.setState({\r\n        previewStatus: 0\r\n      })\r\n    }\r\n  }\r\n  render() {\r\n    const { previewStatus, previewImgInfo } = this.state\r\n    return (\r\n      <div>\r\n        <ul className=\"pic-list\">\r\n          {\r\n            listData.map((item, index) => (\r\n              <li\r\n                key={index}\r\n                className=\"pic-item\"\r\n                onClick={this.previewItem.bind(this, 1, item)}\r\n                title=\"点击预览\">\r\n                <img src={item.bgPic} alt=\"\" className=\"pic\" />\r\n              </li>\r\n            ))\r\n          }\r\n        </ul>\r\n        {\r\n          (previewVisibleStatus === 1 || previewVisibleStatus === 2) ? (\r\n            <div>\r\n              <div className=\"preview-box\"\r\n                onClick={this.previewItem.bind(this, 2)}\r\n                style={{\r\n                  opacity: previewStatus === 3 && previewVisibleStatus !== 2 ? .65 : 0\r\n                }}></div>\r\n              <img\r\n                ref={this.previewRef}\r\n                className={`img${(previewStatus === 3 && previewVisibleStatus === 1) || previewVisibleStatus === 2 ? ' active' : ''}`}\r\n                src={previewImgInfo.bgPic}\r\n                style={{\r\n                  transform: previewStatus === 2 || previewVisibleStatus === 2\r\n                    ? `translate3d(${previewFirstRect[0] - previewLastRect[0]}px, ${previewFirstRect[1] - previewLastRect[1]}px, 0) scale(${scaleValue})`\r\n                    : 'translate3d(0, 0, 0) scale(1)',\r\n                  transformOrigin: '0 0'\r\n                }}\r\n                onClick={this.previewItem.bind(this, 2)}\r\n                onTransitionEnd={this.transEnd.bind(this)}\r\n                alt=\"\" />\r\n            </div>\r\n          ) : null\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Demo;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/project/flip/demo/index.jsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/sass-loader/lib/loader.js!./index.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/sass-loader/lib/loader.js!./index.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/sass-loader/lib/loader.js!./index.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/project/flip/demo/index.scss\n// module id = 1760\n// module chunks = 20","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \".pic-item {\\n  position: relative;\\n  display: inline-block;\\n  width: 100px;\\n  overflow: hidden;\\n  font-size: 0;\\n  border-radius: 10px;\\n  background-size: cover;\\n  background-repeat: no-repeat; }\\n\\n.pic-item::before {\\n  content: ' ';\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  opacity: 0;\\n  cursor: pointer;\\n  background-color: rgba(0, 0, 0, 0.5);\\n  transition: all .3s;\\n  z-index: 1; }\\n\\n.pic-item:hover::before {\\n  opacity: 1; }\\n\\n.pic {\\n  width: 100%;\\n  width: 100%; }\\n\\n.preview-box {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  opacity: 0;\\n  background-color: #000;\\n  transition: opacity .36s ease-in-out;\\n  z-index: 1000; }\\n\\n.img {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  margin: auto;\\n  max-width: 100%;\\n  max-height: 100%;\\n  border-radius: 10px;\\n  z-index: 1002; }\\n\\n.img.active {\\n  transition: all .36s ease-in-out; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/project/flip/demo/index.scss\n// module id = 1761\n// module chunks = 20"],"sourceRoot":""}